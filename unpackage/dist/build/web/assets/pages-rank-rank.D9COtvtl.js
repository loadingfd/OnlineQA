import{Z as e,r as a,e as t,b as r,w as s,F as o,l,o as n,d as i,t as u,f as c,k as h,j as d,c as _}from"./index-nnZW9WDd.js";import{_ as f}from"./uni-list.BPGN9fmt.js";import{r as k}from"./uni-app.es.YMhB4L0_.js";import{_ as m}from"./_plugin-vue_export-helper.BCo6x5W8.js";const p=e.database();const w=m({data:()=>({wh_sheet:null,topThree:[],rankList:[]}),created(){this.get_all_worktime()},methods:{get_all_worktime(){p.collection("uni-id-users").field("_id, nickname, avatar_file, workhour").get().then((e=>{const a=e.result.data;a.forEach((e=>{e.workhour||(e.workhour=0)}));const t=a.sort(((e,a)=>a.workhour-e.workhour));t.forEach((e=>{e.workhour=this.minute_to_time(e.workhour)})),this.topThree=t.slice(0,3),this.rankList=t.slice(3)}))},minute_to_time:e=>e<60?`${e}分钟`:`${Math.floor(e/60)}小时${e%60}分钟`}},[["render",function(e,m,p,w,T,g){const v=h,b=l,j=d,x=k(a("uni-list"),f);return n(),t(o,null,[r(b,{class:"header"},{default:s((()=>[r(v,{class:"title"},{default:s((()=>[i("志愿工时排行榜")])),_:1})])),_:1}),r(b,{class:"top-three"},{default:s((()=>[r(b,{class:"top-item second"},{default:s((()=>[r(j,{src:T.topThree[1].avatar_file.url,class:"avatar silver"},null,8,["src"]),r(v,{class:"name"},{default:s((()=>[i(u(T.topThree[1].nickname.length>6?T.topThree[1].nickname.substring(0,6)+"...":T.topThree[1].nickname||"无名氏"),1)])),_:1}),r(v,{class:"workhour"},{default:s((()=>[i(u(T.topThree[1].workhour),1)])),_:1})])),_:1}),r(b,{class:"top-item first"},{default:s((()=>[r(j,{src:T.topThree[0].avatar_file.url,class:"avatar gold"},null,8,["src"]),r(v,{class:"name crown"},{default:s((()=>[i(u(T.topThree[0].nickname.length>6?T.topThree[0].nickname.substring(0,6)+"...":T.topThree[0].nickname||"无名氏"),1)])),_:1}),r(v,{class:"workhour"},{default:s((()=>[i(u(T.topThree[0].workhour),1)])),_:1})])),_:1}),r(b,{class:"top-item third"},{default:s((()=>[r(j,{src:T.topThree[2].avatar_file.url,class:"avatar bronze"},null,8,["src"]),r(v,{class:"name"},{default:s((()=>[i(u(T.topThree[2].nickname.length>6?T.topThree[2].nickname.substring(0,6)+"...":T.topThree[2].nickname||"无名氏"),1)])),_:1}),r(v,{class:"workhour"},{default:s((()=>[i(u(T.topThree[2].workhour),1)])),_:1})])),_:1})])),_:1}),r(x,null,{default:s((()=>[(n(!0),t(o,null,c(T.rankList,((e,a)=>(n(),_(b,{class:"list-item",key:a},{default:s((()=>[r(v,{class:"rank"},{default:s((()=>[i(u(a+4),1)])),_:2},1024),r(v,{class:"name"},{default:s((()=>[i(u(e.nickname||"无名氏"),1)])),_:2},1024),r(v,{class:"workhour"},{default:s((()=>[i(u(e.workhour),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})],64)}],["__scopeId","data-v-f9bd4fd1"]]);export{w as default};
