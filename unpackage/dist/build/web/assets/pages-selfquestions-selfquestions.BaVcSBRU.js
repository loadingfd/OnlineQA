import{g as e,n as s,y as t,W as a,r as i,e as l,b as o,w as d,F as r,l as u,o as n,d as c,c as f,t as m,f as _,q as h,k as g,i as p}from"./index-nnZW9WDd.js";import{_ as y}from"./uni-icons.BTZacCfd.js";import{r as k}from"./uni-app.es.YMhB4L0_.js";import{_ as b}from"./uni-list-item.Dt_Is--a.js";import{_ as w}from"./uni-list.BPGN9fmt.js";import{_ as j}from"./uni-load-more.CaYHO8__.js";import{_ as I}from"./unicloud-db.CMy1RrDf.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const W=C({data:()=>({userInfo:null,dbWhere:"",field:"title,time,descrip,difficulties,category"}),created(){const t=e("uni-id-pages-userInfo");t?(this.userInfo=t,this.setWhere()):s({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd"})},methods:{setWhere(){this.dbWhere=`user_id == '${this.userInfo._id}' && states == true`},handleItemClick(e){s({url:"/pages/questions/detail?id="+e})},goBack(){t()}},onLoad(){this.$refs.udb&&this.$refs.udb.$on("load",(e=>{console.log("加载的数据:",e)}))},onPullDownRefresh(){this.$refs.udb.loadData({clear:!0},(()=>{a()}))},onReachBottom(){this.$refs.udb.loadMore()}},[["render",function(e,s,t,a,C,W){const $=k(i("uni-icons"),y),q=g,x=u,B=k(i("uni-list-item"),b),M=k(i("uni-list"),w),v=k(i("uni-load-more"),j),z=k(i("unicloud-db"),I);return n(),l(r,null,[o(x,{class:"header-back"},{default:d((()=>[o($,{type:"left",size:"24",onClick:W.goBack},null,8,["onClick"]),o(q,null,{default:d((()=>[c("返回")])),_:1})])),_:1}),o(x,{class:"container"},{default:d((()=>[o(z,{ref:"udb",collection:"questions",where:C.dbWhere,field:C.field,getone:!1,getcount:!0,orderby:"time desc"},{default:d((({data:e,loading:s,hasMore:t,error:a})=>[a?(n(),f(x,{key:0,class:"error-message"},{default:d((()=>[c(m(a.message),1)])),_:2},1024)):(n(),f(x,{key:1},{default:d((()=>[e&&e.length?(n(),f(M,{key:0,class:"question-list"},{default:d((()=>[(n(!0),l(r,null,_(e,((e,s)=>(n(),f(B,{key:s,showArrow:"",clickable:!0,onClick:s=>W.handleItemClick(e._id),class:"list-item"},{body:d((()=>[o(x,{class:"question-content"},{default:d((()=>[o(x,{class:"title-container"},{default:d((()=>[o(q,{class:"title"},{default:d((()=>[c(m(e.title),1)])),_:2},1024)])),_:2},1024),o(q,{class:"description"},{default:d((()=>[c(m(e.descrip),1)])),_:2},1024),o(x,{class:"tags"},{default:d((()=>[o(q,{class:p(["tag difficulty",{easy:0===e.difficulties,medium:1===e.difficulties,hard:2===e.difficulties}])},{default:d((()=>[c(m(0===e.difficulties?"简单":1===e.difficulties?"中等":"困难"),1)])),_:2},1032,["class"]),o(q,{class:"tag category"},{default:d((()=>[c(m("math"===e.category?"数学题":"code"===e.category?"编程题":"resource"===e.category?"求资料":"其他"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)):s?h("",!0):(n(),f(x,{key:1,class:"empty-state"},{default:d((()=>[o(q,{class:"empty-text"},{default:d((()=>[c("暂无发布的问题")])),_:1})])),_:1}))])),_:2},1024)),o(v,{class:"load-more",status:s?"loading":t?"more":"noMore"},null,8,["status"])])),_:1},8,["where","field"])])),_:1})],64)}],["__scopeId","data-v-a0e88017"]]);export{W as default};
