import{Z as s,g as e,n as t,y as i,W as a,r as l,e as o,b as n,w as u,F as c,l as d,o as r,d as f,c as m,f as _,k as p,t as h,i as g}from"./index-nnZW9WDd.js";import{_ as y}from"./uni-icons.BTZacCfd.js";import{r as k}from"./uni-app.es.YMhB4L0_.js";import{_ as q}from"./uni-list-item.Dt_Is--a.js";import{_ as w}from"./uni-list.BPGN9fmt.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=s.database();const j=C({data:()=>({userInfo:null,field:"title,time,descrip,difficulties,category",questions:[]}),created(){const s=e("uni-id-pages-userInfo");s&&(this.userInfo=s,this.getCommentedQuestions())},methods:{async getCommentedQuestions(){try{const s=await I.collection("answers").where({user_id:this.userInfo._id}).field("question_id").get();if(s.result&&s.result.data&&s.result.data.length>0){const e=[...new Set(s.result.data.map((s=>s.question_id)))],t=await I.collection("questions").where(`_id in [${e.map((s=>`'${s}'`)).join(",")}]`).field(this.field).get();this.questions=t.result.data||[]}else this.questions=[]}catch(s){console.error("获取回答失败:",s),this.questions=[]}},handleItemClick(s){t({url:"/pages/questions/detail?id="+s})},goBack(){i()}},onPullDownRefresh(){this.getCommentedQuestions().then((()=>{a()}))}},[["render",function(s,e,t,i,a,C){const I=k(l("uni-icons"),y),j=p,b=d,x=k(l("uni-list-item"),q),Q=k(l("uni-list"),w);return r(),o(c,null,[n(b,{class:"header-back"},{default:u((()=>[n(I,{type:"left",size:"24",onClick:C.goBack},null,8,["onClick"]),n(j,null,{default:u((()=>[f("返回")])),_:1})])),_:1}),n(b,{class:"container"},{default:u((()=>[a.userInfo?(r(),m(b,{key:1},{default:u((()=>[a.questions&&a.questions.length?(r(),m(b,{key:0},{default:u((()=>[n(Q,{class:"question-list"},{default:u((()=>[(r(!0),o(c,null,_(a.questions,((s,e)=>(r(),m(x,{key:e,showArrow:"",clickable:!0,onClick:e=>C.handleItemClick(s._id),class:"list-item"},{body:u((()=>[n(b,{class:"question-content"},{default:u((()=>[n(b,{class:"title-container"},{default:u((()=>[n(j,{class:"title"},{default:u((()=>[f(h(s.title),1)])),_:2},1024)])),_:2},1024),n(j,{class:"description"},{default:u((()=>[f(h(s.descrip),1)])),_:2},1024),n(b,{class:"tags"},{default:u((()=>[n(j,{class:g(["tag difficulty",{easy:0===s.difficulties,medium:1===s.difficulties,hard:2===s.difficulties}])},{default:u((()=>[f(h(0===s.difficulties?"简单":1===s.difficulties?"中等":"困难"),1)])),_:2},1032,["class"]),n(j,{class:"tag category"},{default:u((()=>[f(h("math"===s.category?"数学题":"code"===s.category?"编程题":"resource"===s.category?"求资料":"其他"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):(r(),m(b,{key:1,class:"empty-state"},{default:u((()=>[n(j,{class:"empty-text"},{default:u((()=>[f("暂无回答过的问题")])),_:1})])),_:1}))])),_:1})):(r(),m(b,{key:0,class:"login-tip"},{default:u((()=>[n(j,{class:"tip-text"},{default:u((()=>[f("请先登录后查看")])),_:1})])),_:1}))])),_:1})],64)}],["__scopeId","data-v-8c0433b9"]]);export{j as default};
