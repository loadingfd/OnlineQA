import{Z as t,y as e,n as s,r as a,e as i,b as l,w as o,F as n,l as r,o as u,d,t as c,f,k as _,c as m}from"./index-nnZW9WDd.js";import{_ as k}from"./uni-icons.BTZacCfd.js";import{r as p}from"./uni-app.es.YMhB4L0_.js";import{_ as h}from"./uni-list.BPGN9fmt.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const w=t.database();const q=g({data:()=>({userManwork:null,totaltime:0}),computed:{formatTotalTime(){const t=this.totaltime;if(t>=60){const e=t%60;return`${Math.floor(t/60)}小时${e?e+"分":""}`}return`${t}分钟`}},onReady(){this.get_manwork()},methods:{get_manwork(){if(t.getCurrentUserInfo().tokenExpired<Date.now())return;const e=t.getCurrentUserInfo().uid,s=w.collection("manhour").where(`ans_user_id == "${e}"`).field("_id, question_id, que_user_id, difficulties").orderBy("time desc").getTemp(),a=w.collection("uni-id-users").field("_id, nickname").getTemp(),i=w.collection("questions").field("_id, title").getTemp();w.collection(s,a,i).get().then((t=>{this.userManwork=t.result.data})),w.collection("uni-id-users").where(`_id == "${e}"`).field("workhour").get().then((t=>{t.result.data[0].workhour?this.totaltime=t.result.data[0].workhour:this.totaltime}))},getDuration:t=>({0:5,1:10,2:15}[t]||0),goBack(){e()},toPost(t){s({url:"/pages/questions/detail?id="+t.question_id[0]._id})}}},[["render",function(t,e,s,g,w,q){const T=p(a("uni-icons"),k),x=_,C=r,j=p(a("uni-list"),h);return u(),i(n,null,[l(C,{class:"header-back"},{default:o((()=>[l(T,{type:"left",size:"24",onClick:q.goBack},null,8,["onClick"]),l(x,null,{default:o((()=>[d("返回")])),_:1})])),_:1}),l(C,{class:"total-time-container"},{default:o((()=>[l(C,{class:"time-circle"},{default:o((()=>[l(C,{class:"time-value"},{default:o((()=>[d(c(q.formatTotalTime),1)])),_:1}),l(C,{class:"time-label"},{default:o((()=>[d("志愿时长")])),_:1})])),_:1})])),_:1}),l(C,{class:"container"},{default:o((()=>[l(j,null,{default:o((()=>[(u(!0),i(n,null,f(w.userManwork,((t,e)=>(u(),m(C,{key:e},{default:o((()=>[l(C,{class:"card"},{default:o((()=>[l(C,{class:"card-content"},{default:o((()=>[l(C,{class:"info-row",onClick:e=>q.toPost(t)},{default:o((()=>[l(x,{class:"nickname text-ellipsis"},{default:o((()=>[d(c(t.que_user_id[0].nickname),1)])),_:2},1024),l(x,{class:"title text-ellipsis"},{default:o((()=>[d(c(t.question_id[0].title),1)])),_:2},1024),l(x,{class:"duration"},{default:o((()=>[d(c(q.getDuration(t.difficulties))+"分钟",1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})],64)}],["__scopeId","data-v-74353392"]]);export{q as default};
